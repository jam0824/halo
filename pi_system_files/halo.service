[Unit]
Description=Run halo.sh after network is up
Wants=network-online.target sound.target
After=network-online.target sound.target

[Service]
EnvironmentFile=/etc/default/halo
Type=simple
User=pi
WorkingDirectory=/home/pi
Environment=XDG_RUNTIME_DIR=/run/user/1000
Environment=PULSE_SERVER=unix:/run/user/1000/pulse/native
ExecStartPre=/bin/sleep 2
ExecStart=/home/pi/halo.sh
Restart=on-failure
RestartSec=3

[Install]
WantedBy=multi-user.target